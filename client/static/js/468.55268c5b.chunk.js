"use strict";(self.webpackChunktema_client=self.webpackChunktema_client||[]).push([[468],{9468:function(e,r,a){a.r(r),a.d(r,{default:function(){return v}});var t=a(1413),n=a(4165),i=a(5861),o=a(9439),l=a(2791),u=a(5705),s=a(9515),d=a(7721),c=a(7075),m=a(8007),g=a(7689),f=a(4303),p=a(8819),h=a(184);function v(){var e=(0,c.j9)(),r=(0,o.Z)(e,2),a=r[0],v=r[1].isLoading,x=(0,p.a)(),y=(0,o.Z)(x,2),T=y[0],b=y[1].isLoading,j=(0,g.UO)().id,q=(0,c.FL)(j,{skip:!j}).data,Z=(0,g.s0)(),w=(0,u.TA)({initialValues:{name:"",color:"",score:0,image:void 0},onSubmit:function(){var e=(0,i.Z)((0,n.Z)().mark((function e(r){var t,i,o,l,u;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(t=new FormData).append("image",r.image),e.next=5,T(t).unwrap();case 5:return i=e.sent,o=i.data,l={name:r.name,color:r.color,score:r.score,image:null===o||void 0===o?void 0:o[0].fileUrl,id:j},e.next=10,a(l).unwrap();case 10:f.Z.fire({title:"Success",text:"Team updated successfully",icon:"success"}),Z(-1),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),f.Z.fire({title:"Error",text:(null===e.t0||void 0===e.t0||null===(u=e.t0.data)||void 0===u?void 0:u.message)||"Something went wrong",icon:"error"});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(r){return e.apply(this,arguments)}}(),validationSchema:m.Ry({name:m.Z_().required("Required"),color:m.Z_().required("Required"),score:m.Z_().required("Required"),image:m.Z_().required("Required")})}),_=w.getFieldProps,E=w.handleSubmit,N=w.setFieldValue,k=w.errors,F=w.touched;return l.useEffect((function(){if(q){var e,r,a,t,n,i;if(N("name",null===q||void 0===q||null===(e=q.data)||void 0===e?void 0:e.name),N("color",null===q||void 0===q||null===(r=q.data)||void 0===r?void 0:r.color),N("score",null===q||void 0===q||null===(a=q.data)||void 0===a?void 0:a.score),null!==q&&void 0!==q&&null!==(t=q.data)&&void 0!==t&&t.image)fetch(null===q||void 0===q||null===(i=q.data)||void 0===i?void 0:i.image).then((function(e){return e.blob()})).then((function(e){var r=new File([e],"image.png",{type:"image/png"});N("image",r)}));console.log(null===q||void 0===q||null===(n=q.data)||void 0===n?void 0:n.image)}}),[q]),(0,h.jsxs)("div",{className:"grid gap-4",children:[(0,h.jsx)("h2",{className:"text-2xl font-semibold leading-tight text-gray-800 dark:text-white",children:"Edit Team"}),(0,h.jsxs)("form",{onSubmit:E,className:"mt-10",children:[(0,h.jsxs)("div",{className:"mb-4 flex flex-col",children:[(0,h.jsx)(s.__,{htmlFor:"name",children:"Team Name"}),(0,h.jsx)(s.oi,(0,t.Z)({id:"name",placeholder:"Enter team name",helperText:F.name&&k.name},_("name")))]}),(0,h.jsxs)("div",{className:"mb-4 flex flex-col",children:[(0,h.jsx)(s.__,{htmlFor:"color",children:"Team color"}),(0,h.jsx)("input",(0,t.Z)({id:"color",placeholder:"Enter team color",className:"w-full  border border-gray-300 rounded-md h-10",type:"color"},_("color"))),F.color&&k.color&&(0,h.jsx)("p",{className:"text-red-500",children:k.color})]}),(0,h.jsxs)("div",{className:"mb-4 flex flex-col",children:[(0,h.jsx)(s.__,{htmlFor:"score",children:"Team score"}),(0,h.jsx)(s.oi,(0,t.Z)({id:"score",placeholder:"Enter team score",helperText:F.score&&k.score,type:"number"},_("score")))]}),(0,h.jsxs)("div",{className:"mb-4 flex flex-col",children:[(0,h.jsx)(s.__,{htmlFor:"image",children:"Team image"}),(0,h.jsx)("input",{className:"block w-full cursor-pointer rounded-lg border border-gray-300 bg-gray-50 text-sm text-gray-900 focus:outline-none dark:border-gray-600 dark:bg-gray-700 dark:text-gray-400 dark:placeholder-gray-400",id:"file_input",type:"file",name:"image",accept:"image/*",onChange:function(e){N("image",e.currentTarget.files[0])}}),F.image&&k.image&&(0,h.jsx)("p",{className:"text-red-500",children:k.image})]}),(0,h.jsx)("div",{className:"mb-6 mt-20",children:(0,h.jsx)(s.zx,{type:"submit",className:"w-full lg:w-auto bg-primary-900 hover:bg-primary-700",children:"Edit Team"})}),(0,h.jsx)(d.Z,{isLoading:v||b})]})]})}},7075:function(e,r,a){a.d(r,{FL:function(){return s},ad:function(){return c},j9:function(){return d},mn:function(){return l},rS:function(){return u}});var t=a(4925),n=a(2901),i=["id"],o=n.g.injectEndpoints({endpoints:function(e){return{createTeam:e.mutation({query:function(e){return{url:"/teams",method:"POST",body:e}},invalidatesTags:["teams"]}),getTeams:e.query({query:function(){return{url:"/teams",method:"GET"}},providesTags:["teams"]}),getTeamById:e.query({query:function(e){return{url:"/teams/".concat(e),method:"GET"}},providesTags:["teams"]}),updateTeam:e.mutation({query:function(e){var r=e.id,a=(0,t.Z)(e,i);return{url:"/teams/".concat(r),method:"PUT",body:a}},invalidatesTags:["teams"]}),deleteTeam:e.mutation({query:function(e){return{url:"/teams/".concat(e),method:"DELETE"}},invalidatesTags:["teams"]})}}}),l=o.useCreateTeamMutation,u=o.useGetTeamsQuery,s=o.useGetTeamByIdQuery,d=o.useUpdateTeamMutation,c=o.useDeleteTeamMutation},8819:function(e,r,a){a.d(r,{a:function(){return t}});var t=a(2901).g.injectEndpoints({endpoints:function(e){return{uploadImage:e.mutation({query:function(e){return{url:"/files/upload-image",method:"POST",body:e}}})}}}).useUploadImageMutation}}]);
//# sourceMappingURL=468.55268c5b.chunk.js.map