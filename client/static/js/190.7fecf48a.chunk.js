"use strict";(self.webpackChunktema_client=self.webpackChunktema_client||[]).push([[190],{9999:function(e,r,n){var t=n(184);r.Z=function(e){e.error;return(0,t.jsx)("p",{className:"text-red-500",children:"An error occurred"})}},1084:function(e,r,n){n.d(r,{Z:function(){return a}});var t=n(9439),i=n(9515),l=n(2791),o=n(184);function a(e){var r=e.children,n=e.trigger,a=e.title,d=(0,l.useState)(),s=(0,t.Z)(d,2),u=s[0],c=s[1];return console.log("type of children: ",typeof r),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{onClick:function(){return c("default")},children:n}),(0,o.jsxs)(i.u_,{show:"default"===u,onClose:function(){return c(void 0)},children:[(0,o.jsx)(i.u_.Header,{children:a}),(0,o.jsx)(i.u_.Body,{children:"function"===typeof r?r({openModal:u,setOpenModal:c}):r})]})]})}},6133:function(e,r,n){var t=n(184);r.Z=function(){return(0,t.jsx)("p",{className:"mr-2 mt-6 flex justify-end text-lg font-bold text-yellow-500",children:"Please Wait. Fetching...."})}},2105:function(e,r,n){var t=n(184);r.Z=function(e){var r=e.isLoading,n=e.isError,i=e.isFetching,l=e.isSuccess,o=e.ui,a=e.loadingUi,d=e.fetchingUi,s=e.errorUi,u=e.paginationUi;return r?(0,t.jsx)(t.Fragment,{children:a}):!r&&n?(0,t.jsx)(t.Fragment,{children:s}):!r&&!n&&i&&d?(0,t.jsxs)("div",{children:[o,d]}):!r&&!n&&l&&u?(0,t.jsxs)(t.Fragment,{children:[o,u]}):(r||n||!l)&&(r||n||!l)?(0,t.jsx)("p",{className:"text-red-500",children:"No condition matched. Logical Error Ocurred. Please contact to developer!"}):(0,t.jsx)(t.Fragment,{children:o})}},5362:function(e,r,n){var t=n(1413),i=n(4165),l=n(5861),o=n(5705),a=n(9515),d=n(7721),s=n(8007),u=n(184);r.Z=function(e){var r=e.isShowFormTitle,n=e.onSubmit,c=void 0===n?(0,l.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))):n,f=e.isLoading,v=(0,o.TA)({initialValues:{name:""},onSubmit:c,validationSchema:s.Ry({name:s.Z_().required("Required")})}),m=v.getFieldProps,h=v.handleSubmit,p=v.errors,x=v.touched;return(0,u.jsxs)("div",{className:"grid gap-4",children:[r&&(0,u.jsx)("h2",{className:"text-2xl font-semibold leading-tight text-gray-800 dark:text-white",children:"Create event"}),(0,u.jsxs)("form",{onSubmit:h,className:"mt-10 grid gap-4",children:[(0,u.jsxs)("div",{className:"mb-4 flex flex-col gap-4",children:[(0,u.jsx)(a.__,{htmlFor:"folder_name",children:"File Name"}),(0,u.jsx)(a.oi,(0,t.Z)({id:"folder_name",placeholder:"Enter folder name",helperText:x.name&&p.name},m("name")))]}),(0,u.jsx)("div",{className:"mb-6 mt-20",children:(0,u.jsx)(a.zx,{type:"submit",className:"w-full lg:w-auto bg-primary-900 hover:bg-primary-700",children:"Create Folder"})}),(0,u.jsx)(d.Z,{isLoading:f})]})]})}},3354:function(e,r,n){var t=n(184);r.Z=function(e){var r=e.folder,n=void 0===r?{_id:"",name:"",files:[],__v:0}:r,i=e.handleFolderDoubleClick,l=void 0===i?function(){}:i;return(0,t.jsxs)("div",{onClick:function(e){return l(e,null===n||void 0===n?void 0:n._id)},className:"flex flex-col justify-center items-center gap-1 cursor-pointer hover:opacity-95",children:[(0,t.jsx)("img",{className:"w-24",src:"/Mac_Folder_Icon.png",alt:"".concat(null===n||void 0===n?void 0:n.name," folder icon")}),(0,t.jsx)("p",{className:"text-white w-20 pb-1 break-words",children:null===n||void 0===n?void 0:n.name})]})}},9190:function(e,r,n){n.r(r),n.d(r,{default:function(){return A}});var t=n(1413),i=n(3433),l=n(4925),o=n(4165),a=n(5861),d=n(9439),s=n(2791),u=n(7721),c=n(9999),f=n(6133),v=n(2105),m=n(6856),h=n(7689),p=n(3719),x=n(8820),g=n(9515),b=n(1084),j=n(5362),w=n(4303),y=n(3354),Z=n(5705),F=n(8007),N=n(184),k=function(e){var r=e.isShowFormTitle,n=e.onSubmit,t=void 0===n?(0,a.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))):n,i=e.isLoading,l=(0,Z.TA)({initialValues:{file:""},onSubmit:t,validationSchema:F.Ry({file:F.nK().required("Required")})}),d=(l.getFieldProps,l.setFieldValue),s=l.handleSubmit,c=l.errors,f=l.touched;return(0,N.jsxs)("div",{className:"grid gap-4",children:[r&&(0,N.jsx)("h2",{className:"text-2xl font-semibold leading-tight text-gray-800 dark:text-white",children:"Create file"}),(0,N.jsxs)("form",{onSubmit:s,className:"mt-10 grid gap-4",children:[(0,N.jsxs)("div",{className:"mb-4 flex flex-col gap-4",children:[(0,N.jsx)(g.__,{htmlFor:"image",children:"File"}),(0,N.jsx)("input",{className:"block w-full cursor-pointer rounded-lg border border-gray-300 bg-gray-50 text-sm text-gray-900 focus:outline-none dark:border-gray-600 dark:bg-gray-700 dark:text-gray-400 dark:placeholder-gray-400",id:"file_input",type:"file",name:"file",onChange:function(e){d("file",e.currentTarget.files[0])}}),f.file&&c.file&&(0,N.jsx)("p",{className:"text-red-500",children:c.file})]}),(0,N.jsx)("div",{className:"mb-6 mt-20",children:(0,N.jsx)(g.zx,{type:"submit",className:"w-full lg:w-auto bg-primary-900 hover:bg-primary-700",children:"Create File"})}),(0,N.jsx)(u.Z,{isLoading:i})]})]})},U=n(8819),T=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(r){var n,t;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(r);case 3:if((n=e.sent).ok){e.next=6;break}throw new Error("Failed to fetch the file.");case 6:return e.next=8,n.blob();case 8:return t=e.sent,e.abrupt("return",t);case 12:return e.prev=12,e.t0=e.catch(0),console.error("Error fetching the file:",e.t0),e.abrupt("return",null);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(r){return e.apply(this,arguments)}}(),S=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(r){var n,t,i,l,a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(null!==(n=null===r||void 0===r?void 0:r.fileUrl)&&void 0!==n?n:"");case 2:if(!(t=e.sent)){e.next=8;break}return a=new File([t],null!==(i=null===r||void 0===r?void 0:r.fileName)&&void 0!==i?i:"",{type:null!==(l=null===r||void 0===r?void 0:r.fileType)&&void 0!==l?l:""}),e.abrupt("return",a);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),_=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(r){var n,t,i,l,a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(r);case 2:if(!(n=e.sent)){e.next=12;break}return l=URL.createObjectURL(n),console.log("Thumbnail URL:",l),a=n.name,console.log("File Name:",a),console.log("Converted File:",n),e.abrupt("return",{thumbnailUrl:l,fileName:a,originalFileUrl:null!==(t=null===r||void 0===r?void 0:r.fileUrl)&&void 0!==t?t:"",id:null!==(i=null===r||void 0===r?void 0:r._id)&&void 0!==i?i:"N/A"});case 12:console.error("Failed to convert file.");case 13:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),C=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(r){var n,t,i,l,a,d,s;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.filename,t=void 0===n?"":n,i=r.fileUrl,l=void 0===i?"":i,e.prev=1,e.next=4,fetch(l);case 4:if((a=e.sent).ok){e.next=7;break}throw new Error("Failed to fetch the file.");case 7:return e.next=9,a.blob();case 9:d=e.sent,(s=document.createElement("a")).href=URL.createObjectURL(d),s.setAttribute("download",t),s.click(),URL.revokeObjectURL(s.href),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),console.error("Error downloading the file:",e.t0);case 20:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(r){return e.apply(this,arguments)}}(),L=["data"],E=function(e){var r,n,t,i,l=e.data,u=e.thumbnailAndFiles,c=(0,h.UO)().id,f=(0,h.s0)(),v=(0,p.F2)(),x=(0,d.Z)(v,1)[0],g=(0,s.useCallback)((function(e,r){2===(null===e||void 0===e?void 0:e.detail)&&(console.log("folder double clicked",e.detail),f("/dashboard/folders/".concat(r)))}),[]),b=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(r){var n,t,i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.fileId,t=r.folderId,e.prev=1,e.next=4,x({folderId:t,fileId:n}).unwrap();case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),console.log("error",e.t0),w.Z.fire({title:"Error",text:(null===e.t0||void 0===e.t0||null===(i=e.t0.data)||void 0===i?void 0:i.message)||"Something went wrong",icon:"error"});case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(r){return e.apply(this,arguments)}}(),j=!(null===l||void 0===l||null===(r=l.data)||void 0===r||null===(n=r.folders)||void 0===n||!n.length),Z=!(null===u||void 0===u||!u.length);return(0,N.jsxs)("div",{className:"grid gap-10",children:[(0,N.jsxs)("div",{className:"grid gap-4",children:[(0,N.jsx)("h5",{className:"font-bold tracking-tight text-gray-900 dark:text-white mb-2",children:j?"Available Folders":"No Folder Found"}),j&&(0,N.jsx)("div",{className:"text-white flex flex-wrap gap-4",children:null===l||void 0===l||null===(t=l.data)||void 0===t||null===(i=t.folders)||void 0===i?void 0:i.map((function(e){return(0,N.jsx)(y.Z,{folder:e,handleFolderDoubleClick:g},null===e||void 0===e?void 0:e._id)}))})]}),(0,N.jsxs)("div",{className:"grid gap-4",children:[(0,N.jsx)("h5",{className:"font-bold tracking-tight text-gray-900 dark:text-white mb-2",children:Z?"Available Files":"No File Found"}),Z&&(0,N.jsx)("div",{className:"text-white flex flex-wrap gap-8",children:null===u||void 0===u?void 0:u.map((function(e){var r,n,t=null===e||void 0===e||null===(r=e.fileName)||void 0===r?void 0:r.substring(0,15);return(0,N.jsx)(N.Fragment,{children:(0,N.jsxs)("div",{className:"max-w-[400px] grid gap-4",children:[(0,N.jsx)("div",{className:" w-full h-[5rem] overflow-hidden ",children:(0,N.jsx)("img",{className:"w-full h-full aspect-square object-cover",src:null!==(n=null===e||void 0===e?void 0:e.thumbnailUrl)&&void 0!==n?n:"",alt:null===e||void 0===e?void 0:e.fileName})}),(0,N.jsx)("h5",{className:"font-normal tracking-tight text-gray-900 dark:text-white break-all",children:"".concat(t?t+"...":"")}),(0,N.jsxs)("div",{className:"flex justify-between items-center gap-1",children:[(0,N.jsx)("button",{onClick:function(){var r,n;return C({filename:null!==(r=null===e||void 0===e?void 0:e.fileName)&&void 0!==r?r:"",fileUrl:null!==(n=null===e||void 0===e?void 0:e.originalFileUrl)&&void 0!==n?n:""})},children:(0,N.jsx)(m.uKn,{className:"w-4 h-4 text-green-500"})}),(0,N.jsx)("button",{onClick:function(){var r;return b({fileId:null!==(r=null===e||void 0===e?void 0:e.id)&&void 0!==r?r:"",folderId:null!==c&&void 0!==c?c:""})},children:(0,N.jsx)(m.ZkW,{className:"w-4 h-4 text-red-500"})})]})]})})}))})]})]})};function A(){var e=(0,s.useState)([]),r=(0,d.Z)(e,2),n=r[0],m=r[1],y=(0,h.UO)().id,Z=(0,h.s0)(),F=(0,p.Q1)(y),T=F.data,S=(0,l.Z)(F,L),C=(0,p.NO)(),A=(0,d.Z)(C,2),q=A[0],I=A[1].isLoading,O=((0,s.useCallback)((function(e,r){2===(null===e||void 0===e?void 0:e.detail)&&(console.log("folder double clicked",e.detail),Z("/dashboard/folders/".concat(r)))}),[]),(0,p.Yh)()),M=(0,d.Z)(O,1)[0],P=(0,U.a)(),R=(0,d.Z)(P,1)[0],D=(0,s.useMemo)((function(){var e,r=null===T||void 0===T||null===(e=T.data)||void 0===e?void 0:e.files,n=[],t=null===r||void 0===r?void 0:r.map((function(e){return _(e)}));return t?Promise.all(t).then((function(e){return n.push.apply(n,(0,i.Z)(e)),n})):n}),[T]);return(0,s.useEffect)((function(){(0,a.Z)((0,o.Z)().mark((function e(){var r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D;case 2:r=e.sent,m(r);case 4:case"end":return e.stop()}}),e)})))()}),[D]),console.log("ThumbnailAndFiles: ",n),(0,N.jsx)("div",{className:"text-white",children:(0,N.jsx)(v.Z,(0,t.Z)((0,t.Z)({},S),{},{loadingUi:(0,N.jsx)(u.Z,{isLoading:null===S||void 0===S?void 0:S.isLoading}),fetchingUi:(0,N.jsx)(f.Z,{}),errorUi:(0,N.jsx)(c.Z,{}),ui:(0,N.jsxs)("div",{className:"space-y-4",children:[(0,N.jsxs)("div",{className:"flex justify-start gap-2",children:[(0,N.jsx)(b.Z,{title:"Add Folder",trigger:(0,N.jsxs)(g.zx,{type:"button",color:"light",children:[(0,N.jsx)(x.$cT,{className:"w-5 h-5 fill-[#69CAF7] cursor-pointer mr-1"})," ","Add Folder"]}),children:function(e){var r=e.setOpenModal,n=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(n){var t;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("parent id: ",y),e.prev=1,e.next=4,q({parent_id:y,name:n.name}).unwrap();case 4:w.Z.fire({title:"Success",text:"Folder added successfully",icon:"success"}),null===r||void 0===r||r(void 0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),w.Z.fire({title:"Error",text:(null===e.t0||void 0===e.t0||null===(t=e.t0.data)||void 0===t?void 0:t.message)||"Something went wrong",icon:"error"});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(r){return e.apply(this,arguments)}}();return(0,N.jsx)(j.Z,{isLoading:I,onSubmit:n})}}),(0,N.jsx)(b.Z,{title:"Add File",trigger:(0,N.jsxs)(g.zx,{type:"button",color:"light",children:[(0,N.jsx)(x.QZL,{className:"w-5 h-5 fill-[#69CAF7] cursor-pointer mr-1"})," ","Add File"]}),children:function(e){var r=e.setOpenModal,n=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(n){var t,i,l,a,d,s,u,c;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("parent id: ",y),e.prev=1,(a=new FormData).append("file",n.file),e.next=6,R(a).unwrap();case 6:return d=e.sent,s=d.data,console.log("upload Image: ",s),u={id:y,files:[{fileName:null===s||void 0===s||null===(t=s[0])||void 0===t?void 0:t.fileName,fileType:null===s||void 0===s||null===(i=s[0])||void 0===i?void 0:i.fileType,fileUrl:null===s||void 0===s||null===(l=s[0])||void 0===l?void 0:l.fileUrl}]},e.next=12,M(u).unwrap();case 12:w.Z.fire({title:"Success",text:"File added successfully",icon:"success"}),null===r||void 0===r||r(void 0),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),w.Z.fire({title:"Error",text:(null===e.t0||void 0===e.t0||null===(c=e.t0.data)||void 0===c?void 0:c.message)||"Something went wrong",icon:"error"});case 19:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(r){return e.apply(this,arguments)}}();return(0,N.jsx)(k,{isLoading:I,onSubmit:n})}})]}),(0,N.jsx)(E,{data:T,thumbnailAndFiles:n})]})}))})}},3719:function(e,r,n){n.d(r,{F2:function(){return v},NO:function(){return f},Q1:function(){return u},VW:function(){return s},Yh:function(){return c},we:function(){return d}});var t=n(4925),i=n(2901),l=["id"],o=["id"],a=i.g.injectEndpoints({endpoints:function(e){return{createFolder:e.mutation({query:function(e){return{url:"/folders",method:"POST",body:e}},invalidatesTags:["folders"]}),createNewFolder:e.mutation({query:function(e){return{url:"/folders",method:"POST",body:e}},invalidatesTags:["folders"]}),getFolders:e.query({query:function(){return{url:"/folders?noParent=true",method:"GET"}},providesTags:["folders"]}),getFolderById:e.query({query:function(e){return{url:"/folders/".concat(e),method:"GET"}},providesTags:["folders"]}),updateFolder:e.mutation({query:function(e){var r=e.id,n=(0,t.Z)(e,l);return{url:"/folders/".concat(r),method:"PUT",body:n}},invalidatesTags:["folders"]}),uploadFile:e.mutation({query:function(e){var r=e.id,n=(0,t.Z)(e,o);return{url:"/folders/files/".concat(r),method:"POST",body:n}},invalidatesTags:["folders"]}),deleteAFile:e.mutation({query:function(e){return{url:"/folders/delete-files",body:{folderId:e.folderId,fileId:e.fileId},method:"POST"}},invalidatesTags:["folders"]}),deleteFolder:e.mutation({query:function(e){return{url:"/folders/".concat(e),method:"DELETE"}},invalidatesTags:["folders"]})}}}),d=a.useCreateFolderMutation,s=a.useGetFoldersQuery,u=a.useGetFolderByIdQuery,c=(a.useUpdateFolderMutation,a.useDeleteFolderMutation,a.useUploadFileMutation),f=a.useCreateNewFolderMutation,v=a.useDeleteAFileMutation},8819:function(e,r,n){n.d(r,{a:function(){return t}});var t=n(2901).g.injectEndpoints({endpoints:function(e){return{uploadImage:e.mutation({query:function(e){return{url:"/files/upload-image",method:"POST",body:e}}})}}}).useUploadImageMutation}}]);
//# sourceMappingURL=190.7fecf48a.chunk.js.map