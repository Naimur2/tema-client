"use strict";(self.webpackChunktema_client=self.webpackChunktema_client||[]).push([[645],{4645:function(e,t,n){n.r(t);var a=n(1413),r=n(4165),i=n(5861),d=n(9439),o=n(5705),u=n(9515),l=n(7721),s=n(7075),c=n(8007),m=n(7689),g=n(4303),v=n(7258),p=n(8819),f=n(184);t.default=function(){var e,t=(0,v.ru)(),n=(0,d.Z)(t,2),h=n[0],x=n[1].isLoading,_=(0,s.rS)(void 0),y=_.data,T=_.isLoading,E=(0,p.a)(),j=(0,d.Z)(E,1)[0],b=(0,m.s0)(),q=(0,o.TA)({initialValues:{name:"",team_id:"",starting_date:"",ending_date:"",location:"",image:""},onSubmit:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,a,i,d,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(a=new FormData).append("image",t.image),e.next=5,j(a).unwrap();case 5:return i=e.sent,d=i.data,console.log("create event data: ",d),e.next=10,h({name:t.name,team_id:t.team_id,starting_date:new Date(t.starting_date),ending_date:new Date(t.ending_date),location:null===t||void 0===t?void 0:t.location,image:null===d||void 0===d||null===(n=d[0])||void 0===n?void 0:n.fileUrl}).unwrap();case 10:g.Z.fire({title:"Success",text:"Event aded successfully",icon:"success"}),b(-1),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),g.Z.fire({title:"Error",text:(null===e.t0||void 0===e.t0||null===(o=e.t0.data)||void 0===o?void 0:o.message)||"Something went wrong",icon:"error"});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),validationSchema:c.Ry({name:c.Z_().required("Required"),team_id:c.Z_().required("Required"),starting_date:c.Z_().required("Required"),ending_date:c.Z_().required("Required"),location:c.Z_().required("Required"),image:c.nK().required("Required")})}),Z=q.getFieldProps,N=q.setFieldValue,w=q.handleSubmit,k=q.errors,S=q.touched,F=null===y||void 0===y||null===(e=y.data)||void 0===e?void 0:e.map((function(e){return{label:e.name,value:e._id}}));return(0,f.jsxs)("div",{className:"grid gap-4",children:[(0,f.jsx)("h2",{className:"text-2xl font-semibold leading-tight text-gray-800 dark:text-white",children:"Create event"}),(0,f.jsxs)("form",{onSubmit:w,className:"mt-10 grid gap-4",children:[(0,f.jsxs)("div",{className:"mb-4 flex flex-col gap-4",children:[(0,f.jsx)(u.__,{htmlFor:"name",children:"Event Name"}),(0,f.jsx)(u.oi,(0,a.Z)({id:"name",placeholder:"Enter event name",helperText:S.name&&k.name},Z("name")))]}),(0,f.jsxs)("div",{className:"mb-4 flex flex-col gap-4",children:[(0,f.jsx)(u.__,{htmlFor:"team_id",children:"Team Name"}),(0,f.jsxs)(u.Ph,(0,a.Z)((0,a.Z)({},Z("team_id")),{},{helperText:S.team_id&&k.team_id,id:"team_id",children:[(0,f.jsx)("option",{value:"",children:"Select team"}),null===F||void 0===F?void 0:F.map((function(e){return(0,f.jsx)("option",{value:e.value,children:e.label},e.value)}))]}))]}),(0,f.jsxs)("div",{className:"grid gap-8 sm:grid-cols-2",children:[(0,f.jsxs)("div",{className:"mb-4 flex flex-col gap-4",children:[(0,f.jsx)(u.__,{htmlFor:"starting_date",children:"Event Start date"}),(0,f.jsx)(u.oi,(0,a.Z)((0,a.Z)({id:"starting_date",placeholder:"Enter starting date",helperText:S.starting_date&&k.starting_date},Z("starting_date")),{},{type:"datetime-local"}))]}),(0,f.jsxs)("div",{className:"mb-4 flex flex-col gap-4",children:[(0,f.jsx)(u.__,{htmlFor:"ending_date",children:"Event End date"}),(0,f.jsx)(u.oi,(0,a.Z)((0,a.Z)({id:"ending_date",placeholder:"Enter starting date",helperText:S.ending_date&&k.ending_date},Z("ending_date")),{},{type:"datetime-local"}))]}),(0,f.jsxs)("div",{className:"mb-4 flex flex-col gap-4",children:[(0,f.jsx)(u.__,{htmlFor:"image",children:"Event image"}),(0,f.jsx)("input",{className:"block w-full cursor-pointer rounded-lg border border-gray-300 bg-gray-50 text-sm text-gray-900 focus:outline-none dark:border-gray-600 dark:bg-gray-700 dark:text-gray-400 dark:placeholder-gray-400",id:"file_input",type:"file",name:"image",accept:"image/*",onChange:function(e){N("image",e.currentTarget.files[0])}}),S.image&&k.image&&(0,f.jsx)("p",{className:"text-red-500",children:k.image})]}),(0,f.jsxs)("div",{className:"mb-4 flex flex-col gap-4",children:[(0,f.jsx)(u.__,{htmlFor:"location",children:"Location"}),(0,f.jsx)(u.oi,(0,a.Z)((0,a.Z)({id:"location",placeholder:"Enter location",helperText:S.location&&k.location},Z("location")),{},{type:"text"}))]})]}),(0,f.jsx)("div",{className:"mb-6 mt-20",children:(0,f.jsx)(u.zx,{type:"submit",className:"w-full lg:w-auto bg-primary-900 hover:bg-primary-700",children:"Create event"})}),(0,f.jsx)(l.Z,{isLoading:x||T})]})]})}},7258:function(e,t,n){n.d(t,{g6:function(){return s},gV:function(){return c},in:function(){return l},kg:function(){return u},ru:function(){return o}});var a=n(4925),r=n(2901),i=["id"],d=r.g.injectEndpoints({endpoints:function(e){return{createEvent:e.mutation({query:function(e){return{url:"/events/create",method:"POST",body:e}},invalidatesTags:["events"]}),getEvents:e.query({query:function(){return{url:"/events/all",method:"GET"}},providesTags:["events"]}),getEventById:e.query({query:function(e){var t=e.id;return{url:"/events/single/".concat(t),method:"GET"}},providesTags:["singleEvent"]}),updateEvent:e.mutation({query:function(e){var t=e.id,n=(0,a.Z)(e,i);return{url:"/events/update/".concat(t),method:"PUT",body:n}},invalidatesTags:["events","singleEvent"]}),deleteEvent:e.mutation({query:function(e){return{url:"/events/remove/".concat(e),method:"DELETE"}},invalidatesTags:function(e,t,n){return[{type:"events"}]}})}}}),o=d.useCreateEventMutation,u=d.useGetEventsQuery,l=d.useGetEventByIdQuery,s=d.useUpdateEventMutation,c=d.useDeleteEventMutation},7075:function(e,t,n){n.d(t,{FL:function(){return l},ad:function(){return c},j9:function(){return s},mn:function(){return o},rS:function(){return u}});var a=n(4925),r=n(2901),i=["id"],d=r.g.injectEndpoints({endpoints:function(e){return{createTeam:e.mutation({query:function(e){return{url:"/teams",method:"POST",body:e}},invalidatesTags:["teams"]}),getTeams:e.query({query:function(){return{url:"/teams",method:"GET"}},providesTags:["teams"]}),getTeamById:e.query({query:function(e){return{url:"/teams/".concat(e),method:"GET"}},providesTags:["teams"]}),updateTeam:e.mutation({query:function(e){var t=e.id,n=(0,a.Z)(e,i);return{url:"/teams/".concat(t),method:"PUT",body:n}},invalidatesTags:["teams"]}),deleteTeam:e.mutation({query:function(e){return{url:"/teams/".concat(e),method:"DELETE"}},invalidatesTags:["teams"]})}}}),o=d.useCreateTeamMutation,u=d.useGetTeamsQuery,l=d.useGetTeamByIdQuery,s=d.useUpdateTeamMutation,c=d.useDeleteTeamMutation},8819:function(e,t,n){n.d(t,{a:function(){return a}});var a=n(2901).g.injectEndpoints({endpoints:function(e){return{uploadImage:e.mutation({query:function(e){return{url:"/files/upload-image",method:"POST",body:e}}})}}}).useUploadImageMutation}}]);
//# sourceMappingURL=645.ccd03aee.chunk.js.map