(self.webpackChunktema_client=self.webpackChunktema_client||[]).push([[890],{5890:function(e,t,n){"use strict";n.r(t);var r=n(1413),i=n(4165),a=n(5861),s=n(9439),u=n(7689),o=n(5705),d=n(9515),l=n(7721),c=n(7075),f=n(8007),m=n(4303),h=n(7258),v=n(2791),g=n(7892),p=n.n(g),y=n(8819),$=n(184);t.default=function(){var e,t=(0,u.UO)().id,n=(0,h.in)({id:t},{skip:!t}).data,g=(0,y.a)(),_=(0,s.Z)(g,1)[0],x=(0,h.g6)(),S=(0,s.Z)(x,2),b=S[0],T=S[1].isLoading,M=(0,c.rS)(void 0,{refetchOnFocus:!0}),w=M.data,D=M.isLoading,E=(0,u.s0)(),j=(0,o.TA)({initialValues:{name:"",team_id:"",starting_date:"",ending_date:"",location:"",image:"",imageName:""},onSubmit:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(n){var r,a,s,u,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(a=new FormData).append("image",n.image),e.next=5,_(a).unwrap();case 5:return s=e.sent,u=s.data,e.next=9,b({id:t,name:n.name,team_id:n.team_id,starting_date:new Date(n.starting_date),ending_date:new Date(n.ending_date),location:null===n||void 0===n?void 0:n.location,image:null===u||void 0===u||null===(r=u[0])||void 0===r?void 0:r.fileUrl}).unwrap();case 9:m.Z.fire({title:"Success",text:"Event edited successfully",icon:"success"}),E("/dashboard/events"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),m.Z.fire({title:"Error",text:(null===e.t0||void 0===e.t0||null===(o=e.t0.data)||void 0===o?void 0:o.message)||"Something went wrong",icon:"error"});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),validationSchema:f.Ry({name:f.Z_().required("Required"),team_id:f.Z_().required("Required"),starting_date:f.Z_().required("Required"),ending_date:f.Z_().required("Required"),location:f.Z_().required("Required"),image:f.nK().required("Required")})}),O=j.getFieldProps,k=j.handleSubmit,q=j.setFieldValue,Z=j.errors,N=j.touched,L=j.values,F=null===w||void 0===w||null===(e=w.data)||void 0===e?void 0:e.map((function(e){var t,n;return{label:null!==(t=null===e||void 0===e?void 0:e.name)&&void 0!==t?t:"",value:null!==(n=null===e||void 0===e?void 0:e._id)&&void 0!==n?n:""}}));return(0,v.useEffect)((function(){if(console.log("get single event data: ",n),n){var e,t,r,i,a,s,u,o,d;if(q("name",null===n||void 0===n||null===(e=n.data)||void 0===e?void 0:e.name),q("team_id",null===n||void 0===n||null===(t=n.data)||void 0===t||null===(r=t.team_id)||void 0===r?void 0:r._id),q("starting_date",p()(null===n||void 0===n||null===(i=n.data)||void 0===i?void 0:i.starting_date).toISOString()),q("ending_date",p()(null===n||void 0===n||null===(a=n.data)||void 0===a?void 0:a.ending_date).toISOString()),q("imageName",null===n||void 0===n||null===(s=n.data)||void 0===s?void 0:s.image),null!==n&&void 0!==n&&null!==(u=n.data)&&void 0!==u&&u.image)fetch(null===n||void 0===n||null===(d=n.data)||void 0===d?void 0:d.image).then((function(e){return e.blob()})).then((function(e){var t=new File([e],"image.png",{type:"image/png"});q("image",t)}));q("location",null===n||void 0===n||null===(o=n.data)||void 0===o?void 0:o.location)}}),[n]),(0,$.jsxs)("div",{className:"grid gap-4",children:[(0,$.jsx)("h2",{className:"text-2xl font-semibold leading-tight text-gray-800 dark:text-white",children:"Edit event"}),(0,$.jsxs)("form",{onSubmit:k,className:"mt-10 grid gap-4",children:[(0,$.jsxs)("div",{className:"mb-4 flex flex-col gap-4",children:[(0,$.jsx)(d.__,{htmlFor:"name",children:"Event Name"}),(0,$.jsx)(d.oi,(0,r.Z)({id:"name",placeholder:"Enter event name",helperText:N.name&&Z.name},O("name")))]}),(0,$.jsxs)("div",{className:"mb-4 flex flex-col gap-4",children:[(0,$.jsx)(d.__,{htmlFor:"team_id",children:"Team Name"}),(0,$.jsxs)(d.Ph,(0,r.Z)((0,r.Z)({},O("team_id")),{},{helperText:N.team_id&&Z.team_id,id:"team_id",children:[(0,$.jsx)("option",{value:"",children:"Select team"}),null===F||void 0===F?void 0:F.map((function(e){return(0,$.jsx)("option",{value:e.value,children:e.label},e.value)}))]}))]}),(0,$.jsxs)("div",{className:"grid gap-8 sm:grid-cols-2",children:[(0,$.jsxs)("div",{className:"mb-4 flex flex-col gap-4",children:[(0,$.jsx)(d.__,{htmlFor:"starting_date",children:"Event Start date"}),(0,$.jsx)(d.oi,(0,r.Z)((0,r.Z)({id:"starting_date",placeholder:"Enter starting date",helperText:N.starting_date&&Z.starting_date},O("starting_date")),{},{value:(null===L||void 0===L?void 0:L.starting_date)&&new Date(null===L||void 0===L?void 0:L.starting_date).toISOString().slice(0,-1),type:"datetime-local"}))]}),(0,$.jsxs)("div",{className:"mb-4 flex flex-col gap-4",children:[(0,$.jsx)(d.__,{htmlFor:"ending_date",children:"Event End date"}),(0,$.jsx)(d.oi,(0,r.Z)((0,r.Z)({id:"ending_date",placeholder:"Enter starting date",helperText:N.ending_date&&Z.ending_date},O("ending_date")),{},{type:"datetime-local",value:(null===L||void 0===L?void 0:L.ending_date)&&new Date(null===L||void 0===L?void 0:L.ending_date).toISOString().slice(0,-1)}))]})]}),(0,$.jsxs)("div",{className:"mb-4 flex flex-col gap-4",children:[(0,$.jsx)(d.__,{htmlFor:"image",children:"Event image"}),(0,$.jsx)(d.S2,{className:"block w-full cursor-pointer rounded-lg border border-gray-300 bg-gray-50 text-sm text-gray-900 focus:outline-none dark:border-gray-600 dark:bg-gray-700 dark:text-gray-400 dark:placeholder-gray-400",id:"file_input",name:"image",accept:"image/*",onChange:function(e){q("image",e.currentTarget.files[0]),e.currentTarget.files[0]&&q("imageName",URL.createObjectURL(e.currentTarget.files[0]))}}),N.image&&Z.image&&(0,$.jsx)("p",{className:"text-red-500",children:Z.image})]}),(0,$.jsx)("div",{className:"",children:(0,$.jsx)("img",{src:null===L||void 0===L?void 0:L.imageName,alt:"event image",className:"w-40 h-40 object-cover"})}),(0,$.jsxs)("div",{className:"mb-4 flex flex-col gap-4",children:[(0,$.jsx)(d.__,{htmlFor:"location",children:"Location"}),(0,$.jsx)(d.oi,(0,r.Z)((0,r.Z)({id:"location",placeholder:"Enter location",helperText:N.location&&Z.location},O("location")),{},{type:"text"}))]}),(0,$.jsx)("div",{className:"mb-6 mt-20",children:(0,$.jsx)(d.zx,{type:"submit",className:"w-full lg:w-auto bg-primary-900 hover:bg-primary-700",children:"Edit event"})}),(0,$.jsx)(l.Z,{isLoading:T||D})]})]})}},7258:function(e,t,n){"use strict";n.d(t,{g6:function(){return l},gV:function(){return c},in:function(){return d},kg:function(){return o},ru:function(){return u}});var r=n(4925),i=n(2901),a=["id"],s=i.g.injectEndpoints({endpoints:function(e){return{createEvent:e.mutation({query:function(e){return{url:"/events/create",method:"POST",body:e}},invalidatesTags:["events"]}),getEvents:e.query({query:function(){return{url:"/events/all",method:"GET"}},providesTags:["events"]}),getEventById:e.query({query:function(e){var t=e.id;return{url:"/events/single/".concat(t),method:"GET"}},providesTags:["singleEvent"]}),updateEvent:e.mutation({query:function(e){var t=e.id,n=(0,r.Z)(e,a);return{url:"/events/update/".concat(t),method:"PUT",body:n}},invalidatesTags:["events","singleEvent"]}),deleteEvent:e.mutation({query:function(e){return{url:"/events/remove/".concat(e),method:"DELETE"}},invalidatesTags:function(e,t,n){return[{type:"events"}]}})}}}),u=s.useCreateEventMutation,o=s.useGetEventsQuery,d=s.useGetEventByIdQuery,l=s.useUpdateEventMutation,c=s.useDeleteEventMutation},7075:function(e,t,n){"use strict";n.d(t,{FL:function(){return d},ad:function(){return c},j9:function(){return l},mn:function(){return u},rS:function(){return o}});var r=n(4925),i=n(2901),a=["id"],s=i.g.injectEndpoints({endpoints:function(e){return{createTeam:e.mutation({query:function(e){return{url:"/teams",method:"POST",body:e}},invalidatesTags:["teams"]}),getTeams:e.query({query:function(){return{url:"/teams",method:"GET"}},providesTags:["teams"]}),getTeamById:e.query({query:function(e){return{url:"/teams/".concat(e),method:"GET"}},providesTags:["teams"]}),updateTeam:e.mutation({query:function(e){var t=e.id,n=(0,r.Z)(e,a);return{url:"/teams/".concat(t),method:"PUT",body:n}},invalidatesTags:["teams"]}),deleteTeam:e.mutation({query:function(e){return{url:"/teams/".concat(e),method:"DELETE"}},invalidatesTags:["teams"]})}}}),u=s.useCreateTeamMutation,o=s.useGetTeamsQuery,d=s.useGetTeamByIdQuery,l=s.useUpdateTeamMutation,c=s.useDeleteTeamMutation},8819:function(e,t,n){"use strict";n.d(t,{a:function(){return r}});var r=n(2901).g.injectEndpoints({endpoints:function(e){return{uploadImage:e.mutation({query:function(e){return{url:"/files/upload-image",method:"POST",body:e}}})}}}).useUploadImageMutation},7892:function(e){e.exports=function(){"use strict";var e=1e3,t=6e4,n=36e5,r="millisecond",i="second",a="minute",s="hour",u="day",o="week",d="month",l="quarter",c="year",f="date",m="Invalid Date",h=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,v=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}},p=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},y={s:p,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),i=n%60;return(t<=0?"+":"-")+p(r,2,"0")+":"+p(i,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),i=t.clone().add(r,d),a=n-i<0,s=t.clone().add(r+(a?-1:1),d);return+(-(r+(n-i)/(a?i-s:s-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:d,y:c,w:o,d:u,D:f,h:s,m:a,s:i,ms:r,Q:l}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},$="en",_={};_[$]=g;var x=function(e){return e instanceof M},S=function e(t,n,r){var i;if(!t)return $;if("string"==typeof t){var a=t.toLowerCase();_[a]&&(i=a),n&&(_[a]=n,i=a);var s=t.split("-");if(!i&&s.length>1)return e(s[0])}else{var u=t.name;_[u]=t,i=u}return!r&&i&&($=i),i||!r&&$},b=function(e,t){if(x(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new M(n)},T=y;T.l=S,T.i=x,T.w=function(e,t){return b(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var M=function(){function g(e){this.$L=S(e.locale,null,!0),this.parse(e)}var p=g.prototype;return p.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(T.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(h);if(r){var i=r[2]-1||0,a=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,a)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,a)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},p.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},p.$utils=function(){return T},p.isValid=function(){return!(this.$d.toString()===m)},p.isSame=function(e,t){var n=b(e);return this.startOf(t)<=n&&n<=this.endOf(t)},p.isAfter=function(e,t){return b(e)<this.startOf(t)},p.isBefore=function(e,t){return this.endOf(t)<b(e)},p.$g=function(e,t,n){return T.u(e)?this[t]:this.set(n,e)},p.unix=function(){return Math.floor(this.valueOf()/1e3)},p.valueOf=function(){return this.$d.getTime()},p.startOf=function(e,t){var n=this,r=!!T.u(t)||t,l=T.p(e),m=function(e,t){var i=T.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return r?i:i.endOf(u)},h=function(e,t){return T.w(n.toDate()[e].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},v=this.$W,g=this.$M,p=this.$D,y="set"+(this.$u?"UTC":"");switch(l){case c:return r?m(1,0):m(31,11);case d:return r?m(1,g):m(0,g+1);case o:var $=this.$locale().weekStart||0,_=(v<$?v+7:v)-$;return m(r?p-_:p+(6-_),g);case u:case f:return h(y+"Hours",0);case s:return h(y+"Minutes",1);case a:return h(y+"Seconds",2);case i:return h(y+"Milliseconds",3);default:return this.clone()}},p.endOf=function(e){return this.startOf(e,!1)},p.$set=function(e,t){var n,o=T.p(e),l="set"+(this.$u?"UTC":""),m=(n={},n[u]=l+"Date",n[f]=l+"Date",n[d]=l+"Month",n[c]=l+"FullYear",n[s]=l+"Hours",n[a]=l+"Minutes",n[i]=l+"Seconds",n[r]=l+"Milliseconds",n)[o],h=o===u?this.$D+(t-this.$W):t;if(o===d||o===c){var v=this.clone().set(f,1);v.$d[m](h),v.init(),this.$d=v.set(f,Math.min(this.$D,v.daysInMonth())).$d}else m&&this.$d[m](h);return this.init(),this},p.set=function(e,t){return this.clone().$set(e,t)},p.get=function(e){return this[T.p(e)]()},p.add=function(r,l){var f,m=this;r=Number(r);var h=T.p(l),v=function(e){var t=b(m);return T.w(t.date(t.date()+Math.round(e*r)),m)};if(h===d)return this.set(d,this.$M+r);if(h===c)return this.set(c,this.$y+r);if(h===u)return v(1);if(h===o)return v(7);var g=(f={},f[a]=t,f[s]=n,f[i]=e,f)[h]||1,p=this.$d.getTime()+r*g;return T.w(p,this)},p.subtract=function(e,t){return this.add(-1*e,t)},p.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||m;var r=e||"YYYY-MM-DDTHH:mm:ssZ",i=T.z(this),a=this.$H,s=this.$m,u=this.$M,o=n.weekdays,d=n.months,l=n.meridiem,c=function(e,n,i,a){return e&&(e[n]||e(t,r))||i[n].slice(0,a)},f=function(e){return T.s(a%12||12,e,"0")},h=l||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r};return r.replace(v,(function(e,r){return r||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return T.s(t.$y,4,"0");case"M":return u+1;case"MM":return T.s(u+1,2,"0");case"MMM":return c(n.monthsShort,u,d,3);case"MMMM":return c(d,u);case"D":return t.$D;case"DD":return T.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return c(n.weekdaysMin,t.$W,o,2);case"ddd":return c(n.weekdaysShort,t.$W,o,3);case"dddd":return o[t.$W];case"H":return String(a);case"HH":return T.s(a,2,"0");case"h":return f(1);case"hh":return f(2);case"a":return h(a,s,!0);case"A":return h(a,s,!1);case"m":return String(s);case"mm":return T.s(s,2,"0");case"s":return String(t.$s);case"ss":return T.s(t.$s,2,"0");case"SSS":return T.s(t.$ms,3,"0");case"Z":return i}return null}(e)||i.replace(":","")}))},p.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},p.diff=function(r,f,m){var h,v=this,g=T.p(f),p=b(r),y=(p.utcOffset()-this.utcOffset())*t,$=this-p,_=function(){return T.m(v,p)};switch(g){case c:h=_()/12;break;case d:h=_();break;case l:h=_()/3;break;case o:h=($-y)/6048e5;break;case u:h=($-y)/864e5;break;case s:h=$/n;break;case a:h=$/t;break;case i:h=$/e;break;default:h=$}return m?h:T.a(h)},p.daysInMonth=function(){return this.endOf(d).$D},p.$locale=function(){return _[this.$L]},p.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=S(e,t,!0);return r&&(n.$L=r),n},p.clone=function(){return T.w(this.$d,this)},p.toDate=function(){return new Date(this.valueOf())},p.toJSON=function(){return this.isValid()?this.toISOString():null},p.toISOString=function(){return this.$d.toISOString()},p.toString=function(){return this.$d.toUTCString()},g}(),w=M.prototype;return b.prototype=w,[["$ms",r],["$s",i],["$m",a],["$H",s],["$W",u],["$M",d],["$y",c],["$D",f]].forEach((function(e){w[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),b.extend=function(e,t){return e.$i||(e(t,M,b),e.$i=!0),b},b.locale=S,b.isDayjs=x,b.unix=function(e){return b(1e3*e)},b.en=_[$],b.Ls=_,b.p={},b}()}}]);
//# sourceMappingURL=890.0d34c31d.chunk.js.map